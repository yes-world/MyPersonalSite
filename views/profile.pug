doctype html
html
    head
        title Кабинет - yes.world
        meta(charset="UTF-8")
        meta(name="viewport" content="width=device-width, initial-scale=1")
        link(rel="stylesheet" href="css/bootstrap.css")
        link(rel="stylesheet" href="css/style.css")
        script(src="js/jquery-3.5.1.js")
        script(src="js/bootstrap.bundle.js")
    body
        if message
            div(class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel" aria-hidden="true")
                div(class="modal-dialog" role="document")
                    div(class="modal-content")
                        div(class="modal-header")
                            h5(class="modal-title" id="messageModalLabel") Сообщение
                            button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                                span(aria-hidden="true") &times;
                        div(class="modal-body")
                            p #{message}
                        div(class="modal-footer")
                            button(type="button" class="btn btn-secondary" data-dismiss="modal") Закрыть
        
        div(class="modal fade" id="changeName" tabindex="-1" role="dialog" aria-labelledby="changeNameLabel" aria-hidden="true")
                div(class="modal-dialog" role="document")
                    div(class="modal-content")
                        div(class="modal-header")
                            h5(class="modal-title" id="changeNameLabel") Редактирование профиля
                            button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                                span(aria-hidden="true") &times;
                        div(class="modal-body")
                            div(class="container-fluid")
                                div(class="row")
                                    div(class="col-12")
                                        form(action="/changeName" method="post" class="needs-validation" novalidate)
                                            div(class="form-group")
                                                label(for="inName") Имя:
                                                input(name="name" type="text" class="form-control" id="inName" value=username required)
                                                div(class="invalid-feedback") Заполните поле
                                            div(class="form-group")
                                                label(for="inSurname") Фамилия:
                                                input(name="surname" type="text" class="form-control" id="inSurname" value=surname required)
                                                div(class="invalid-feedback") Заполните поле
                                            div
                                                button(type="submit" class="btn btn-primary") Изменить
                                                button(type="button" class="btn btn-secondary ml-2" data-dismiss="modal") Отмена

        div(class="modal fade" id="changePassword" tabindex="-1" role="dialog" aria-labelledby="changePasswordLabel" aria-hidden="true")
                div(class="modal-dialog" role="document")
                    div(class="modal-content")
                        div(class="modal-header")
                            h5(class="modal-title" id="changePasswordLabel") Изменить пароль
                            button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                                span(aria-hidden="true") &times;
                        div(class="modal-body")
                            div(class="container-fluid")
                                div(class="row")
                                    div(class="col-12")
                                        form(action="/changePassword" method="post" class="needs-validation" novalidate)
                                            div(class="form-group")
                                                label(for="inPassword") Старый пароль:
                                                input(name="oldpass" type="password" class="form-control" id="inPassword" required)
                                                div(class="invalid-feedback") Заполните поле
                                            div(class="form-group")
                                                label(for="inNewPassword") Новый пароль:
                                                input(name="newpass" type="password" class="form-control" id="inNewPassword" required)
                                                div(class="invalid-feedback") Заполните поле
                                            div
                                                button(type="submit" class="btn btn-primary") Изменить
                                                button(type="button" class="btn btn-secondary ml-2" data-dismiss="modal") Отмена
        
        div(class="modal fade" id="removeUser" tabindex="-1" role="dialog" aria-labelledby="removeUserLabel" aria-hidden="true")
                div(class="modal-dialog" role="document")
                    div(class="modal-content")
                        div(class="modal-header")
                            h5(class="modal-title" id="removeUserLabel") Удаление профиля
                            button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                                span(aria-hidden="true") &times;
                        div(class="modal-body")
                            p Вы действительно хотите удалить профиль?
                        div(class="modal-footer")
                            a(class="btn btn-primary" href="/removeUser") Да
                            button(type="button" class="btn btn-secondary" data-dismiss="modal") Нет

        nav(class="navbar navbar-expand-md navbar-dark sticky-top" style="background-color: #910083;")
            div(class="container")
                a(class="navbar-brand" href="/") yes.world
                button(class="navbar-toggler" type="button" data-toggle="collapse" data-target="#hatMenu" aria-controls="hatMenu" aria-expanded="false" aria-label="Открыть")
                    span(class="navbar-toggler-icon")

                div(class="collapse navbar-collapse justify-content-md-end" id="hatMenu")
                    ul(class="navbar-nav")
                        li(class="nav-item pr-md-3")
                            a(class="nav-link" href="/") Главная
                        li(class="nav-item pr-md-3")
                            a(class="nav-link" href="https://github.com/yes-world" target="_blank") GitHub
                        li(class="nav-item dropdown pr-md-3")
                            a(class="nav-link dropdown-toggle" href="#" id="social" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false") Соц. сети
                            div(class="dropdown-menu" aria-labelledby="social")
                                a(class="dropdown-item" href="https://vk.com/yes.world" target="_blank") ВКонтакте
                                a(class="dropdown-item" href="https://www.instagram.com/__yes.world__/" target="_blank") Instagram
                                a(class="dropdown-item" href="https://vm.tiktok.com/3LprqS/" target="_blank") TikTok
                                a(class="dropdown-item" href="https://music.yandex.ru/users/DamirSabitov2001/playlists/3" target="_blank") Плейлист на Яндекс.Музыке
                        li(class="nav-item pr-md-3")
                            a(class="nav-link" href="/contacts") Контакты
                        li(class="nav-item dropdown")
                            a(class="btn btn-outline-light dropdown-toggle" href="#" id="profileMenu" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false") #{username}
                            div(class="dropdown-menu" aria-labelledby="profileMenu")
                                a(class="dropdown-item" href="/profile") Профиль
                                div(class="dropdown-divider")
                                a(class="dropdown-item" href="/logout") Выйти

        div(class="container")
            div(class="row justify-content-md-around align-items-md-start")
                div(class="col-md-5 mt-md-5 contactWindow shadow conWin1")
                    div(class="mt-4 mt-md-3 mx-3 text-center") Информация профиля:
                    div(class="d-flex align-items-center mt-4 mb-3 mx-3")
                        div(class="mr-3") Имя:
                        div(class="mr-3") #{username} #{surname}
                        button(type="button" class="btn btn-light" data-toggle="modal" data-target="#changeName") Изменить
                    div(class="d-flex align-items-center mb-4 mb-md-3 mx-3")
                        div(class="mr-3") Email:
                        div #{email}
                div(class="col-md-5 mt-md-5 contactWindow shadow conWin2")
                    div(class="mt-4 mt-md-3 mx-3 text-center") Настройки:
                    div(class="mt-4 mb-3 mx-3")
                        button(type="button" class="btn btn-light" data-toggle="modal" data-target="#changePassword") Сменить пароль
                    div(class="mb-4 mb-md-3 mx-3")
                        button(type="button" class="btn btn-light" data-toggle="modal" data-target="#removeUser") Удалить профиль

        div(class="container mt-4")
            div(class="row conWin1") Отправленные сообщения:
            if messages.length == 0
                div(class="row conWin1") Нет писем.
            else
                table(class="table table-hover")
                    thead
                        tr
                            th(scope="col") #
                            th(scope="col") Дата
                            th(scope="col") Тема
                            th(scope="col") Сообщение
                    tbody
                        - var i = 1;
                        each item in messages
                            tr
                                th(scope="row")= i
                                td= item.date
                                td= item.subject
                                td= item.message
                            - i++;
                
        script(src="js/formValidation.js")
        if message
            script $('#messageModal').modal('show')